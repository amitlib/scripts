{
	"annotations": {
		"list": [{
			"$$hashKey": "object:145",
			"builtIn": 1,
			"datasource": "-- Grafana --",
			"enable": true,
			"hide": true,
			"iconColor": "rgba(0, 211, 255, 1)",
			"name": "Annotations & Alerts",
			"type": "dashboard"
		}]
	},
	"description": "Aqua and Docker monitoring with Prometheus and cadvisor",
	"editable": true,
	"gnetId": 193,
	"graphTooltip": 1,
	"id": 1,
	"iteration": 1526452943381,
	"links": [],
	"panels": [{
		"cacheTimeout": null,
		"colorBackground": false,
		"colorValue": false,
		"colors": ["#299c46",
		"rgba(237, 129, 40, 0.89)",
		"#d44a3a"],
		"datasource": "NFT-Postgres",
		"format": "none",
		"gauge": {
			"maxValue": 100,
			"minValue": 0,
			"show": false,
			"thresholdLabels": false,
			"thresholdMarkers": true
		},
		"gridPos": {
			"h": 2,
			"w": 4,
			"x": 0,
			"y": 0
		},
		"id": 12,
		"interval": null,
		"links": [],
		"mappingType": 1,
		"mappingTypes": [{
			"name": "value to text",
			"value": 1
		},
		{
			"name": "range to text",
			"value": 2
		}],
		"maxDataPoints": 100,
		"nullPointMode": "connected",
		"nullText": null,
		"postfix": "",
		"postfixFontSize": "50%",
		"prefix": "",
		"prefixFontSize": "50%",
		"rangeMaps": [{
			"from": "null",
			"text": "N/A",
			"to": "null"
		}],
		"sparkline": {
			"fillColor": "rgba(31, 118, 189, 0.18)",
			"full": false,
			"lineColor": "rgb(31, 120, 193)",
			"show": false
		},
		"tableColumn": "",
		"targets": [{
			"alias": "",
			"expr": "",
			"format": "time_series",
			"intervalFactor": 1,
			"rawSql": "SELECT\n  $__time(timestamp),\n  agents_connected\nFROM\n  aqua_monitor\nWHERE\n  $__timeFilter(timestamp) and testname=$testname\n",
			"refId": "A"
		}],
		"thresholds": "",
		"title": "Connected Agents",
		"type": "singlestat",
		"valueFontSize": "80%",
		"valueMaps": [{
			"op": "=",
			"text": "N/A",
			"value": "null"
		}],
		"valueName": "current"
	},
	{
		"cacheTimeout": null,
		"colorBackground": false,
		"colorValue": false,
		"colors": ["#299c46",
		"rgba(237, 129, 40, 0.89)",
		"#d44a3a"],
		"datasource": "NFT-Postgres",
		"format": "none",
		"gauge": {
			"maxValue": 100,
			"minValue": 0,
			"show": false,
			"thresholdLabels": false,
			"thresholdMarkers": true
		},
		"gridPos": {
			"h": 2,
			"w": 4,
			"x": 4,
			"y": 0
		},
		"id": 14,
		"interval": null,
		"links": [],
		"mappingType": 1,
		"mappingTypes": [{
			"name": "value to text",
			"value": 1
		},
		{
			"name": "range to text",
			"value": 2
		}],
		"maxDataPoints": 100,
		"nullPointMode": "connected",
		"nullText": null,
		"postfix": "",
		"postfixFontSize": "50%",
		"prefix": "",
		"prefixFontSize": "50%",
		"rangeMaps": [{
			"from": "null",
			"text": "N/A",
			"to": "null"
		}],
		"sparkline": {
			"fillColor": "rgba(31, 118, 189, 0.18)",
			"full": false,
			"lineColor": "rgb(31, 120, 193)",
			"show": false
		},
		"tableColumn": "",
		"targets": [{
			"alias": "",
			"expr": "SELECT\r\n  $__time(timestamp),\r\n  agents_disconnected\r\nFROM\r\n  aqua_monitor\r\nWHERE\r\n  $__timeFilter(timestamp) and testname=$testname",
			"format": "time_series",
			"intervalFactor": 1,
			"rawSql": "SELECT\r\n  $__time(timestamp),\r\n  agents_disconnected\r\nFROM\r\n  aqua_monitor\r\nWHERE\r\n  $__timeFilter(timestamp) and testname=$testname",
			"refId": "A"
		}],
		"thresholds": "",
		"title": "Disconnected Agents",
		"type": "singlestat",
		"valueFontSize": "80%",
		"valueMaps": [{
			"op": "=",
			"text": "N/A",
			"value": "null"
		}],
		"valueName": "current"
	},
	{
		"cacheTimeout": null,
		"colorBackground": false,
		"colorValue": false,
		"colors": ["#299c46",
		"rgba(237, 129, 40, 0.89)",
		"#d44a3a"],
		"datasource": "NFT-Postgres",
		"format": "none",
		"gauge": {
			"maxValue": 100,
			"minValue": 0,
			"show": false,
			"thresholdLabels": false,
			"thresholdMarkers": true
		},
		"gridPos": {
			"h": 2,
			"w": 4,
			"x": 8,
			"y": 0
		},
		"id": 16,
		"interval": null,
		"links": [],
		"mappingType": 1,
		"mappingTypes": [{
			"name": "value to text",
			"value": 1
		},
		{
			"name": "range to text",
			"value": 2
		}],
		"maxDataPoints": 100,
		"nullPointMode": "connected",
		"nullText": null,
		"postfix": "",
		"postfixFontSize": "50%",
		"prefix": "",
		"prefixFontSize": "50%",
		"rangeMaps": [{
			"from": "null",
			"text": "N/A",
			"to": "null"
		}],
		"sparkline": {
			"fillColor": "rgba(31, 118, 189, 0.18)",
			"full": false,
			"lineColor": "rgb(31, 120, 193)",
			"show": false
		},
		"tableColumn": "",
		"targets": [{
			"alias": "",
			"expr": "",
			"format": "time_series",
			"intervalFactor": 1,
			"rawSql": "SELECT\r\n  $__time(timestamp),\r\n  scanners_online\r\nFROM\r\n  aqua_monitor\r\nWHERE\r\n  $__timeFilter(timestamp) and testname=$testname",
			"refId": "A"
		}],
		"thresholds": "",
		"title": "Online Scanners",
		"type": "singlestat",
		"valueFontSize": "80%",
		"valueMaps": [{
			"op": "=",
			"text": "N/A",
			"value": "null"
		}],
		"valueName": "current"
	},
	{
		"cacheTimeout": null,
		"colorBackground": false,
		"colorValue": false,
		"colors": ["#badff4",
		"rgba(237, 129, 40, 0.89)",
		"rgba(50, 172, 45, 0.97)"],
		"datasource": "Prometheus",
		"editable": true,
		"error": false,
		"format": "none",
		"gauge": {
			"maxValue": 100,
			"minValue": 0,
			"show": false,
			"thresholdLabels": false,
			"thresholdMarkers": true
		},
		"gridPos": {
			"h": 2,
			"w": 4,
			"x": 12,
			"y": 0
		},
		"height": "20",
		"id": 7,
		"interval": null,
		"links": [],
		"mappingType": 1,
		"mappingTypes": [{
			"name": "value to text",
			"value": 1
		},
		{
			"name": "range to text",
			"value": 2
		}],
		"maxDataPoints": 100,
		"nullPointMode": "connected",
		"nullText": null,
		"postfix": "",
		"postfixFontSize": "50%",
		"prefix": "",
		"prefixFontSize": "50%",
		"rangeMaps": [{
			"from": "null",
			"text": "N/A",
			"to": "null"
		}],
		"sparkline": {
			"fillColor": "rgba(31, 118, 189, 0.18)",
			"full": true,
			"lineColor": "rgb(31, 120, 193)",
			"show": false
		},
		"tableColumn": "",
		"targets": [{
			"expr": "count(container_last_seen{instance=~'$node',image=~'$imagename'})",
			"format": "time_series",
			"intervalFactor": 2,
			"legendFormat": "",
			"metric": "container_last_seen",
			"refId": "A",
			"step": 3600
		}],
		"thresholds": "",
		"title": "Running containers",
		"transparent": true,
		"type": "singlestat",
		"valueFontSize": "80%",
		"valueMaps": [{
			"op": "=",
			"text": "N/A",
			"value": "null"
		}],
		"valueName": "current"
	},
	{
		"aliasColors": {
			
		},
		"bars": false,
		"dashLength": 10,
		"dashes": false,
		"datasource": "NFT-Postgres",
		"fill": 1,
		"gridPos": {
			"h": 10,
			"w": 24,
			"x": 0,
			"y": 2
		},
		"id": 10,
		"legend": {
			"alignAsTable": false,
			"avg": false,
			"current": true,
			"max": false,
			"min": false,
			"rightSide": false,
			"show": true,
			"total": false,
			"values": true
		},
		"lines": true,
		"linewidth": 1,
		"links": [],
		"nullPointMode": "null as zero",
		"percentage": false,
		"pointradius": 5,
		"points": false,
		"renderer": "flot",
		"seriesOverrides": [],
		"spaceLength": 10,
		"stack": false,
		"steppedLine": false,
		"targets": [{
			"alias": "",
			"expr": "",
			"format": "time_series",
			"intervalFactor": 1,
			"rawSql": "SELECT\r\n  $__time(timestamp),\r\n  scanq_pending,scanq_progress,scanq_finished,scanq_failed,scanners_online,scanq_spm,scanq_spmps\r\n  from\r\n  aqua_monitor\r\nWHERE\r\n  $__timeFilter(timestamp) and testname=$testname",
			"refId": "A"
		}],
		"thresholds": [],
		"timeFrom": null,
		"timeShift": null,
		"title": "Aqua Statistics",
		"tooltip": {
			"shared": true,
			"sort": 0,
			"value_type": "individual"
		},
		"type": "graph",
		"xaxis": {
			"buckets": null,
			"mode": "time",
			"name": null,
			"show": true,
			"values": []
		},
		"yaxes": [{
			"format": "short",
			"label": null,
			"logBase": 1,
			"max": null,
			"min": "0",
			"show": true
		},
		{
			"format": "short",
			"label": null,
			"logBase": 1,
			"max": null,
			"min": null,
			"show": true
		}],
		"yaxis": {
			"align": false,
			"alignLevel": null
		}
	},
	{
		"aliasColors": {
			
		},
		"bars": false,
		"dashLength": 10,
		"dashes": false,
		"datasource": "Prometheus",
		"decimals": 2,
		"editable": true,
		"error": false,
		"fill": 1,
		"grid": {
			
		},
		"gridPos": {
			"h": 7,
			"w": 24,
			"x": 0,
			"y": 12
		},
		"id": 2,
		"legend": {
			"alignAsTable": true,
			"avg": true,
			"current": true,
			"max": false,
			"min": false,
			"rightSide": true,
			"show": true,
			"total": false,
			"values": true
		},
		"lines": true,
		"linewidth": 2,
		"links": [],
		"nullPointMode": "connected",
		"percentage": false,
		"pointradius": 5,
		"points": false,
		"renderer": "flot",
		"seriesOverrides": [],
		"spaceLength": 10,
		"stack": false,
		"steppedLine": false,
		"targets": [{
			"alias": "",
			"expr": "sum(rate(container_cpu_user_seconds_total{instance=~'$node',image=~'$imagename'}[5m]) * 100 / 4) by (image, instance)",
			"format": "time_series",
			"intervalFactor": 2,
			"legendFormat": "{{image}} - {{instance}}",
			"metric": "cpu",
			"rawSql": "SELECT\n  $__time(time_column),\n  value1\nFROM\n  metric_table\nWHERE\n  $__timeFilter(time_column)\n",
			"refId": "A",
			"step": 240
		}],
		"thresholds": [],
		"timeFrom": null,
		"timeShift": null,
		"title": "CPU Usage",
		"tooltip": {
			"msResolution": false,
			"shared": true,
			"sort": 0,
			"value_type": "cumulative"
		},
		"transparent": false,
		"type": "graph",
		"xaxis": {
			"buckets": null,
			"mode": "time",
			"name": null,
			"show": true,
			"values": []
		},
		"yaxes": [{
			"format": "percent",
			"label": null,
			"logBase": 1,
			"max": "100",
			"min": null,
			"show": true
		},
		{
			"format": "short",
			"label": null,
			"logBase": 1,
			"max": null,
			"min": null,
			"show": true
		}],
		"yaxis": {
			"align": false,
			"alignLevel": null
		}
	},
	{
		"aliasColors": {
			
		},
		"bars": false,
		"dashLength": 10,
		"dashes": false,
		"datasource": "Prometheus",
		"decimals": 2,
		"editable": true,
		"error": false,
		"fill": 1,
		"grid": {
			
		},
		"gridPos": {
			"h": 7,
			"w": 24,
			"x": 0,
			"y": 19
		},
		"id": 1,
		"legend": {
			"alignAsTable": true,
			"avg": true,
			"current": true,
			"hideEmpty": true,
			"hideZero": true,
			"max": false,
			"min": false,
			"rightSide": true,
			"show": true,
			"total": false,
			"values": true
		},
		"lines": true,
		"linewidth": 2,
		"links": [],
		"nullPointMode": "null as zero",
		"percentage": false,
		"pointradius": 5,
		"points": false,
		"renderer": "flot",
		"seriesOverrides": [],
		"spaceLength": 10,
		"stack": false,
		"steppedLine": false,
		"targets": [{
			"expr": "sum(container_memory_usage_bytes{instance=~'$node',image=~'$imagename'}) by (image,instance)",
			"format": "time_series",
			"hide": false,
			"interval": "",
			"intervalFactor": 2,
			"legendFormat": "{{image}}  --  {{instance}}",
			"metric": "container_memory_usage_bytes",
			"refId": "A",
			"step": 240
		}],
		"thresholds": [],
		"timeFrom": null,
		"timeShift": null,
		"title": "Memory Usage",
		"tooltip": {
			"msResolution": false,
			"shared": true,
			"sort": 1,
			"value_type": "cumulative"
		},
		"transparent": false,
		"type": "graph",
		"xaxis": {
			"buckets": null,
			"mode": "time",
			"name": null,
			"show": true,
			"values": []
		},
		"yaxes": [{
			"format": "bytes",
			"label": "",
			"logBase": 1,
			"max": null,
			"min": null,
			"show": true
		},
		{
			"format": "short",
			"label": null,
			"logBase": 1,
			"max": null,
			"min": null,
			"show": false
		}],
		"yaxis": {
			"align": false,
			"alignLevel": null
		}
	},
	{
		"aliasColors": {
			
		},
		"bars": false,
		"dashLength": 10,
		"dashes": false,
		"datasource": "Prometheus",
		"editable": true,
		"error": false,
		"fill": 1,
		"grid": {
			
		},
		"gridPos": {
			"h": 7,
			"w": 12,
			"x": 0,
			"y": 26
		},
		"id": 3,
		"legend": {
			"avg": false,
			"current": false,
			"max": false,
			"min": false,
			"show": true,
			"total": false,
			"values": false
		},
		"lines": true,
		"linewidth": 2,
		"links": [],
		"nullPointMode": "connected",
		"percentage": false,
		"pointradius": 5,
		"points": false,
		"renderer": "flot",
		"seriesOverrides": [],
		"spaceLength": 10,
		"stack": false,
		"steppedLine": false,
		"targets": [{
			"expr": "sum(irate(container_network_receive_bytes_total{instance=~'$node',image=~'$imagename'}[5m])) by (image,instance)",
			"format": "time_series",
			"intervalFactor": 2,
			"legendFormat": "{{image}}  - {{instance}}",
			"metric": "container_network_receive_bytes_total",
			"refId": "A",
			"step": 600
		}],
		"thresholds": [],
		"timeFrom": null,
		"timeShift": null,
		"title": "Network - Received Bytes - Containers",
		"tooltip": {
			"msResolution": false,
			"shared": true,
			"sort": 0,
			"value_type": "cumulative"
		},
		"type": "graph",
		"xaxis": {
			"buckets": null,
			"mode": "time",
			"name": null,
			"show": true,
			"values": []
		},
		"yaxes": [{
			"format": "Bps",
			"label": null,
			"logBase": 1,
			"max": null,
			"min": null,
			"show": true
		},
		{
			"format": "short",
			"label": null,
			"logBase": 1,
			"max": null,
			"min": null,
			"show": true
		}],
		"yaxis": {
			"align": false,
			"alignLevel": null
		}
	},
	{
		"aliasColors": {
			
		},
		"bars": false,
		"dashLength": 10,
		"dashes": false,
		"datasource": "Prometheus",
		"editable": true,
		"error": false,
		"fill": 1,
		"grid": {
			
		},
		"gridPos": {
			"h": 7,
			"w": 12,
			"x": 12,
			"y": 26
		},
		"id": 4,
		"legend": {
			"avg": false,
			"current": false,
			"max": false,
			"min": false,
			"show": true,
			"total": false,
			"values": false
		},
		"lines": true,
		"linewidth": 2,
		"links": [],
		"nullPointMode": "connected",
		"percentage": false,
		"pointradius": 5,
		"points": false,
		"renderer": "flot",
		"seriesOverrides": [],
		"spaceLength": 10,
		"stack": false,
		"steppedLine": false,
		"targets": [{
			"expr": "sum(irate(container_network_transmit_bytes_total{instance=~'$node',image=~'$imagename'}[5m])) by (image,instance)",
			"format": "time_series",
			"intervalFactor": 2,
			"legendFormat": "{{image}} - {{instance}}",
			"refId": "A",
			"step": 600
		}],
		"thresholds": [],
		"timeFrom": null,
		"timeShift": null,
		"title": "Network - Transmit Bytes - Containers",
		"tooltip": {
			"msResolution": false,
			"shared": true,
			"sort": 0,
			"value_type": "cumulative"
		},
		"type": "graph",
		"xaxis": {
			"buckets": null,
			"mode": "time",
			"name": null,
			"show": true,
			"values": []
		},
		"yaxes": [{
			"format": "Bps",
			"label": null,
			"logBase": 1,
			"max": null,
			"min": null,
			"show": true
		},
		{
			"format": "short",
			"label": null,
			"logBase": 1,
			"max": null,
			"min": null,
			"show": true
		}],
		"yaxis": {
			"align": false,
			"alignLevel": null
		}
	},
	{
		"aliasColors": {
			
		},
		"bars": false,
		"dashLength": 10,
		"dashes": false,
		"datasource": "Prometheus",
		"fill": 1,
		"gridPos": {
			"h": 7,
			"w": 24,
			"x": 0,
			"y": 33
		},
		"id": 8,
		"legend": {
			"avg": false,
			"current": false,
			"max": false,
			"min": false,
			"show": true,
			"total": false,
			"values": false
		},
		"lines": true,
		"linewidth": 1,
		"links": [],
		"nullPointMode": "null",
		"percentage": false,
		"pointradius": 5,
		"points": false,
		"renderer": "flot",
		"seriesOverrides": [],
		"spaceLength": 10,
		"stack": false,
		"steppedLine": false,
		"targets": [{
			"expr": "sum(container_fs_usage_bytes{instance=~'$node',image=~'$imagename'}) by (image,instance)",
			"format": "time_series",
			"intervalFactor": 2,
			"legendFormat": "{{image}} - {{instance}}",
			"refId": "A"
		}],
		"thresholds": [],
		"timeFrom": null,
		"timeShift": null,
		"title": "File System - Usage - Containers",
		"tooltip": {
			"shared": true,
			"sort": 0,
			"value_type": "individual"
		},
		"type": "graph",
		"xaxis": {
			"buckets": null,
			"mode": "time",
			"name": null,
			"show": true,
			"values": []
		},
		"yaxes": [{
			"format": "bytes",
			"label": null,
			"logBase": 1,
			"max": null,
			"min": null,
			"show": true
		},
		{
			"format": "short",
			"label": null,
			"logBase": 1,
			"max": null,
			"min": null,
			"show": true
		}],
		"yaxis": {
			"align": false,
			"alignLevel": null
		}
	}],
	"refresh": false,
	"schemaVersion": 16,
	"style": "dark",
	"tags": ["docker"],
	"templating": {
		"list": [{
			"allValue": "|",
			"current": {
				"text": "aquadev/gateway:master + aquadev/scanner-cli:ido-conn-leak + aquadev/server:ido-conn-leak",
				"value": ["aquadev/gateway:master",
				"aquadev/scanner-cli:ido-conn-leak",
				"aquadev/server:ido-conn-leak"]
			},
			"datasource": "Prometheus",
			"hide": 0,
			"includeAll": true,
			"label": null,
			"multi": true,
			"name": "imagename",
			"options": [],
			"query": "container_last_seen{job=\"cadvisor\",image=~\"aqua.*\"}",
			"refresh": 1,
			"regex": "/.*image=\"([^\"]*).*/",
			"sort": 0,
			"tagValuesQuery": "",
			"tags": [],
			"tagsQuery": "",
			"type": "query",
			"useTags": false
		},
		{
			"allValue": "|",
			"current": {
				"text": "10.0.0.7:8090 + 10.0.0.4:8090 + 10.0.0.6:8090 + 10.0.0.5:8090",
				"value": ["10.0.0.7:8090",
				"10.0.0.4:8090",
				"10.0.0.6:8090",
				"10.0.0.5:8090"]
			},
			"datasource": "Prometheus",
			"hide": 0,
			"includeAll": true,
			"label": null,
			"multi": true,
			"name": "node",
			"options": [],
			"query": "container_last_seen{job=\"cadvisor\"}",
			"refresh": 1,
			"regex": "/.*instance=\"([^\"]*).*/",
			"sort": 0,
			"tagValuesQuery": "",
			"tags": [],
			"tagsQuery": "",
			"type": "query",
			"useTags": false
		},
		{
			"allValue": null,
			"current": {
				"text": "ido_fix1_05_14_18_T21",
				"value": ["ido_fix1_05_14_18_T21"]
			},
			"datasource": "NFT-Postgres",
			"hide": 0,
			"includeAll": false,
			"label": null,
			"multi": true,
			"name": "testname",
			"options": [],
			"query": "select testname from aqua_monitor order by timestamp desc;",
			"refresh": 2,
			"regex": "",
			"sort": 0,
			"tagValuesQuery": "",
			"tags": [],
			"tagsQuery": "",
			"type": "query",
			"useTags": false
		}]
	},
	"time": {
		"from": "now-12h",
		"to": "now"
	},
	"timepicker": {
		"refresh_intervals": ["5s",
		"10s",
		"30s",
		"1m",
		"5m",
		"15m",
		"30m",
		"1h",
		"2h",
		"1d"],
		"time_options": ["5m",
		"15m",
		"1h",
		"6h",
		"12h",
		"24h",
		"2d",
		"7d",
		"30d"]
	},
	"timezone": "browser",
	"title": "TITLE2REPLACE",
	"uid": "4fzl1IZiz",
	"version": 15
}